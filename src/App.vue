<template>
  <!-- –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ —Å –ø–ª–∞–≤–Ω—ã–º –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ–º -->
  <Transition name="fade">
    <LoadingScreen v-if="isLoading" />
  </Transition>
  
  <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
  <div v-show="!isLoading">
    <div class="container">
      <router-view />
    </div>
    <NavBar />
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue'
import NavBar from './components/NavBar.vue'
import LoadingScreen from './components/LoadingScreen.vue'
import { useCatalogStore } from './store/catalog'

const catalogStore = useCatalogStore()
const isLoading = ref(true)

onMounted(async () => {
  try {
    // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ (–æ–¥–∏–Ω —Ä–∞–∑!)
    console.log('üîÑ –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...')
    await catalogStore.fetchCatalog()
    console.log('‚úÖ –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã')
    
    // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –ø–æ–∫–∞–∑–∞ —ç–∫—Ä–∞–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∏
    // (—á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ–ª —É–≤–∏–¥–µ—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ)
    await new Promise(resolve => setTimeout(resolve, 1500))
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', error)
  } finally {
    isLoading.value = false
  }
})
</script>
